<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% if meetup_name %}{{ meetup_name }}{% else %}Teilnehmendenkontaktliste{% endif %}</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
      font-size: 11pt;
      line-height: 1.4;
      margin: 0;
      padding: 1.2rem;
      color: #1a1a1a;
    }
    h1 {
      font-size: 1.4rem;
      margin: 0 0 0.8rem 0;
      font-weight: 600;
    }
    .columns {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.8rem 1.2rem;
    }
    @media print {
      body { padding: 0.8rem; }
      .columns { gap: 0.5rem 1rem; }
    }
    .card {
      border: 1px solid rgba(0,0,0,0.25);
      border-radius: 6px;
      padding: 0.5rem 0.6rem;
      break-inside: avoid;
      page-break-inside: avoid;
      overflow: auto;
    }
    .card-photo {
      float: left;
      width: 72px;
      height: 72px;
      object-fit: cover;
      border-radius: 4px;
      margin-right: 0.5rem;
      margin-bottom: 0.25rem;
    }
    .card-body {
      min-width: 0;
    }
    .card-body p {
      margin: 0.15rem 0;
      font-size: 0.95rem;
    }
    .card-body .label {
      font-weight: 600;
      color: #333;
    }
  </style>
</head>
<body>
  <h1>{% if meetup_name %}{{ meetup_name }}{% else %}Teilnehmendenkontaktliste{% endif %}</h1>
  <div class="columns">
    {% for p in participants %}
    <div class="card">
      <img class="card-photo" src="{{ p.image_data }}" alt="" width="72" height="72">
      <div class="card-body">
        <p><span class="label">Name:</span> {{ p.vorname }}{% if p.vorname and (p.nachname or p.rufname) %} {% endif %}{{ p.nachname }}{% if p.nachname and p.rufname %} {% endif %}{% if p.rufname %}{% if p.vorname or p.nachname %}({{ p.rufname }}){% else %}{{ p.rufname }}{% endif %}{% endif %}</p>
        <p><span class="label">Ort:</span> {{ p.land }}{% if p.plz %}, {{ p.plz }}{% endif %}{% if p.ort %} {{ p.ort }}{% endif %}</p>
        <p><span class="label">Couch:</span> {{ p.couch }}</p>
        {% if p.email is defined and p.email %}<p><span class="label">E-Mail:</span> {{ p.email }}</p>{% endif %}
        {% if p.phone is defined and p.phone %}<p><span class="label">Telefon:</span> {{ p.phone }}</p>{% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
</body>
</html>
